{% load str_filters %}

<div id="likesarea{{topic.pk}}" class="mb-1">
    {% with topic.likes as counter %}
        {% if user.is_authenticated %}
            <button hx-post="{% url 'forum_conversation_extension:like_topic' topic.forum.slug topic.forum.pk topic.slug topic.pk %}" id="like-button{{topic.pk}}"
                hx-target="#likesarea{{topic.pk}}"
                hx-swap="outerHTML" class="btn btn-link btn-sm btn-ico pr-0">
                <i class="{% if topic.has_liked %}fas{%else%}far{%endif%} fa-heart mr-2 text-danger"></i>
                <span>{{counter}} like{{ counter|pluralizefr }}</span>
            </button>
        {% else %}
            {% comment %} TODOÂ add next_url later {% endcomment %}
            <a href="{{inclusion_connect_url}}" class="btn btn-link btn-sm btn-ico pr-0">
                <i class="far fa-heart mr-2  text-danger"></i>
                <span>{{counter}} like{{ counter|pluralizefr }}. Connectez-vous pour contribuer</span>
            </a>
        {% endif %}
    {% endwith %}
</div>
